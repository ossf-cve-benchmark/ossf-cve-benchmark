#!/bin/bash

set -e
MYDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

function abspath() { pushd . > /dev/null; if [ -d "$1" ]; then cd "$1"; dirs -l +0; else cd "`dirname \"$1\"`"; cur_dir=`dirs -l +0`; if [ "$cur_dir" == "/" ]; then echo "$cur_dir`basename \"$1\"`"; else echo "$cur_dir/`basename \"$1\"`"; fi; fi; popd > /dev/null; }
INSTALL_DIR=$(abspath "$INSTALL_DIR")

MAIN="${MYDIR}/../../../../build/ts/contrib/tools/ideal-analysis/src/ideal-analysis.js"
MAIN=$(abspath "$MAIN")
echo "Add the fragment below to a config.json file:

{
    ...
    \"tools\": {
        ...

        \"ideal-analysis\": {
            \"bin\": \"node\",
            \"args\": [
                \"${MAIN}\"
            ]
        }

        ...
    }
    ...
}

"
